$icon__visible: "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><path d='M12,5 C17,5 21.27,8.11 23,12.5 C21.27,16.89 17,20 12,20 C7,20 2.73,16.89 1,12.5 C2.73,8.11 7,5 12,5 Z M12,17.5 C14.76,17.5 17,15.26 17,12.5 C17,9.74 14.76,7.5 12,7.5 C9.24,7.5 7,9.74 7,12.5 C7,15.26 9.24,17.5 12,17.5 Z'></path><path d='M12,9.5 C10.34,9.5 9,10.84 9,12.5 C9,14.16 10.34,15.5 12,15.5 C13.66,15.5 15,14.16 15,12.5 C15,10.84 13.66,9.5 12,9.5 Z'></path></svg>";

$icon__hidden: "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><path d='M19.1145976,17.6145976 C17.1357397,19.111758 14.6721169,20 12,20 C7,20 2.73,16.89 1,12.5 C2.1681438,9.53575071 4.49435577,7.15509483 7.42141271,5.92141271 L9.60854669,8.10854669 C8.05477185,8.95699413 7,10.6060682 7,12.5 C7,15.26 9.24,17.5 12,17.5 C13.8939318,17.5 15.5430059,16.4452281 16.3914533,14.8914533 L19.1145976,17.6145976 L19.1145976,17.6145976 Z'></path><path d='M20.6043865,16.2759593 L16.9972006,12.6687735 C16.9990619,12.6127432 17,12.5564805 17,12.5 C17,9.74 14.76,7.5 12,7.5 C11.9435195,7.5 11.8872568,7.50093805 11.8312265,7.50279942 L9.57740803,5.2489809 C10.3592736,5.08578831 11.1695684,5 12,5 C17,5 21.27,8.11 23,12.5 C22.4438856,13.9111805 21.6253071,15.1900957 20.6043865,16.2759593 L20.6043865,16.2759593 Z' ></path><path d='M13.6675474,14.9959745 C13.1910334,15.314476 12.6176688,15.5 12,15.5 C10.34,15.5 9,14.16 9,12.5 C9,11.8823312 9.18552396,11.3089666 9.50402547,10.8324526 L2.66116524,3.98959236 C2.27064094,3.59906807 2.27064094,2.96590309 2.66116524,2.5753788 C3.05168953,2.18485451 3.68485451,2.18485451 4.0753788,2.5753788 L21.0459415,19.5459415 C21.4364658,19.9364658 21.4364658,20.5696308 21.0459415,20.9601551 C20.6554173,21.3506794 20.0222523,21.3506794 19.631728,20.9601551 L13.6675474,14.9959745 L13.6675474,14.9959745 Z'></path></svg>";

$icon__user-roles: "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><path d='M10.3230099,16.7114756 C10.2750719,16.9669907 10.25,17.2305674 10.25,17.5 L10.25,19.3711011 C6.02022538,18.7421185 2.52424259,15.8678757 1,12 C2.73,7.61 7,4.5 12,4.5 C17,4.5 21.27,7.61 23,12 C22.535229,13.17939 21.8871339,14.2663962 21.0908107,15.2255348 C20.6034444,14.4577131 19.8765876,13.8568689 19.0153344,13.5280964 C19.3232835,13.0069945 19.5,12.3991344 19.5,11.75 C19.5,9.81700338 17.9329966,8.25 16,8.25 C15.7846716,8.25 15.5738849,8.26944511 15.3693,8.30667513 C14.480312,7.49514249 13.2976279,7 12,7 C9.24,7 7,9.24 7,12 C7,14.1718406 8.3870297,16.0216922 10.3230099,16.7114756 L10.3230099,16.7114756 Z'></path><path d='M12.9846656,13.5280964 C12.2574549,13.8056999 11.6260619,14.2772769 11.1537524,14.8795618 C9.90736867,14.5152953 9,13.3659902 9,12 C9,11.1910854 9.31819549,10.4581577 9.83655875,9.91924473 C10.3819456,9.35223691 11.1489146,9 12,9 C12.5215378,9 13.0114888,9.13226964 13.4382205,9.36517645 C12.8561111,9.99020155 12.5,10.8285137 12.5,11.75 C12.5,12.3991344 12.6767165,13.0069945 12.9846656,13.5280964 L12.9846656,13.5280964 Z'></path><path d='M16,13.75 C14.8954305,13.75 14,12.8545695 14,11.75 C14,10.6454305 14.8954305,9.75 16,9.75 C17.1045695,9.75 18,10.6454305 18,11.75 C18,12.8545695 17.1045695,13.75 16,13.75 Z'></path><path d='M20.25,19.5 L11.75,19.5 L11.75,17.5 C11.75,15.9812169 12.9812169,14.75 14.5,14.75 L17.5,14.75 C19.0187831,14.75 20.25,15.9812169 20.25,17.5 L20.25,19.5 Z'></path></svg>";

$icon__time: "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><path d='M19.6896577,7.34929083 C19.0008071,7.12262735 18.2647241,7 17.5,7 C16.4279118,7 15.412115,7.24101205 14.503835,7.6718108 C13.7673955,7.24462863 12.9120921,7 12,7 C9.24,7 7,9.24 7,12 C7,14.4664368 8.78883318,16.5176088 11.1390287,16.9260451 C11.5933818,17.9121373 12.2702864,18.7745488 13.1053647,19.4489015 C12.7414672,19.4827144 12.3727623,19.5 12,19.5 C7,19.5 2.73,16.39 1,12 C2.73,7.61 7,4.5 12,4.5 C14.9375381,4.5 17.6231056,5.5734638 19.6896577,7.34929083 L19.6896577,7.34929083 Z'></path><path d='M12.5503909,9.05011412 C11.2835588,10.3168759 10.5,12.066933 10.5,14 C10.5,14.2073481 10.5090153,14.4125906 10.5266752,14.6153568 C9.6144694,14.1014656 9,13.1241023 9,12 C9,11.1910854 9.31819549,10.4581577 9.83655875,9.91924473 C10.3819456,9.35223691 11.1489146,9 12,9 C12.1880653,9 12.3720234,9.01719911 12.5503909,9.05011412 L12.5503909,9.05011412 Z'></path><path d='M16.732,14.56875 C16.588,14.45625 16.5,14.3 16.5,14.125 C16.5,14.08125 16.524,14.05 16.532,14.00625 L16.524,14.00625 L17.3,11 L18.076,14.00625 L20.5,16 L16.9,14.675 L16.916,14.6625 C16.852,14.6375 16.788,14.60625 16.732,14.56875 L16.732,14.56875 Z'></path><path d='M17.5,19.5 C20.5375661,19.5 23,17.0375661 23,14 C23,10.9624339 20.5375661,8.5 17.5,8.5 C14.4624339,8.5 12,10.9624339 12,14 C12,17.0375661 14.4624339,19.5 17.5,19.5 Z M17.5,18 C15.290861,18 13.5,16.209139 13.5,14 C13.5,11.790861 15.290861,10 17.5,10 C19.709139,10 21.5,11.790861 21.5,14 C21.5,16.209139 19.709139,18 17.5,18 Z'></path></svg>";

.block-visibility-settings {

    .components-panel__body.is-opened>.components-panel__body-title {
        margin-bottom: 10px;
    }

    .components-radio-control__option {
        &:not(:last-child) {
            margin-bottom: 6px;
        }
        input {
            vertical-align: top;
            margin-top: 2px;
        }

        .compound-radio-label {
            display: inline-block;
            font-weight: 600;

            span {
                display: block;
                font-weight: 400;
                max-width: 200px;
                font-size: 12px;
                font-style: normal;
                color: rgb(117, 117, 117);
            }
        }
    }

    .block-visibility-settings__visibility-controls {
        padding-top: 10px;

        .components-notice {
            margin: 0;
        }

        /* Specific styles for the Hide Block visibility control */
        .visibility-controls__hide-block {
            margin-bottom: 24px;
        }

        .visibility-controls__date-time {
            margin-bottom: 24px;

            .date-time-field {
                display: flex;
                justify-content: space-between;
                margin-bottom: 8px;
                padding: 8px 0;

                .components-button {
                    padding: 0;

                    &.is-link {
                        text-decoration: none;

                        svg {
                            margin-right: 4px;
                        }
                    }

                    &.clear-date-time {
                        width: 24px;
                        min-width: 24px;
                        height: 24px;
                    }
                }
            }
        }

        /* Specific styles for the User Roles visibility control */
        .visibility-controls__user-roles {

            .user-roles__label {
                margin-bottom: 6px;
                display: inline-block;
            }

            .user-roles__help {
                font-size: 12px;
                font-style: normal;
                color: rgb(117, 117, 117);
            }

            .user-roles__control {
                .components-base-control {
                    margin-bottom: 6px;
                }
            }
        }
    }
}

.block-visibility__date-time-popover {
    & > div {
        padding: 12px;
    }
    .date-time-header {
        border-bottom: 1px solid #ddd;
        font-weight: bold;
        padding-bottom: 12px;
        margin-bottom: 16px;

        display: flex;
        justify-content: space-between;
    }

    /**
     * Very buggy
    .CalendarDay__today {
        background: #f2f2f2;
        &:hover {
            background: #e4e7e7;
            border: 1px double #e4e7e7;
        }
    }
    */
}

.block-visibility__has-visibility {
    outline: 2px dashed #aaa;
    opacity: .5;

    /*
    transition: opacity .1s ease-in-out;
    -moz-transition: opacity .1s ease-in-out;
    -webkit-transition: opacity .1s ease-in-out;
    */

    &:before {
        content: "";
        height: 24px;
        width: 24px;
        position: absolute;
        right: 8px;
        top: 4px;
        z-index: 1000;
    }

    &.block-visibility__has-roles {
        &:before {
            background: url( $icon__user-roles );
        }
    }

    &.block-visibility__has-date-time {
        &:before {
            background: url( $icon__time );
        }
    }

    &.block-visibility__is-hidden {
        &:before {
            background: url( $icon__hidden );
        }
    }

    &.is-selected,
    &.has-child-selected {
        outline: none;
        opacity: 1;

        &:before {
            background: none;
        }
    }
}
